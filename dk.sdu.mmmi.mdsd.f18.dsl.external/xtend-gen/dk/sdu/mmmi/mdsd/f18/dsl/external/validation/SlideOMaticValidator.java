/**
 * generated by Xtext 2.12.0
 */
package dk.sdu.mmmi.mdsd.f18.dsl.external.validation;

import dk.sdu.mmmi.mdsd.f18.dsl.external.slideOMatic.Block;
import dk.sdu.mmmi.mdsd.f18.dsl.external.slideOMatic.Code;
import dk.sdu.mmmi.mdsd.f18.dsl.external.slideOMatic.Content;
import dk.sdu.mmmi.mdsd.f18.dsl.external.slideOMatic.FileCode;
import dk.sdu.mmmi.mdsd.f18.dsl.external.slideOMatic.Image;
import dk.sdu.mmmi.mdsd.f18.dsl.external.slideOMatic.SlideOMaticPackage;
import dk.sdu.mmmi.mdsd.f18.dsl.external.validation.AbstractSlideOMaticValidator;
import java.io.File;
import org.eclipse.emf.common.util.EList;
import org.eclipse.xtext.validation.Check;

/**
 * This class contains custom validation rules.
 * 
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#validation
 */
@SuppressWarnings("all")
public class SlideOMaticValidator extends AbstractSlideOMaticValidator {
  public final static String UNBLOCKABLE_CONTENT = "unblockableContent";
  
  public final static String FILE_NOT_FOUND = "fileNotFound";
  
  public final static String LINE_NUMBER_TOO_HIGH = "lineNumberTooHigh";
  
  @Check
  public void checkUnblockableContent(final Block block) {
    EList<Content> _content = block.getContent();
    for (final Content content : _content) {
      if ((content instanceof Code)) {
        this.error("Unable to put Code in a block", SlideOMaticPackage.Literals.BLOCK__CONTENT, SlideOMaticValidator.UNBLOCKABLE_CONTENT);
      }
    }
  }
  
  @Check
  public void checkSource(final Image img) {
    String _src = img.getSrc();
    final File f = new File(_src);
    boolean _exists = f.exists();
    boolean _not = (!_exists);
    if (_not) {
      this.warning("Unable to find image source", SlideOMaticPackage.Literals.IMAGE__SRC, SlideOMaticValidator.FILE_NOT_FOUND);
    }
  }
  
  @Check
  public void checkSource(final FileCode code) {
    String _src = code.getSrc();
    final File f = new File(_src);
    boolean _exists = f.exists();
    boolean _not = (!_exists);
    if (_not) {
      this.warning("Unable to find Code source", SlideOMaticPackage.Literals.FILE_CODE__SRC, SlideOMaticValidator.FILE_NOT_FOUND);
    }
  }
  
  @Check
  public Object checkLineSequence(final FileCode fc) {
    Object _xifexpression = null;
    if (((fc.getSrc() != null) && (fc.getLines() != null))) {
      Object _xblockexpression = null;
      {
        String _src = fc.getSrc();
        final File f = new File(_src);
        Object _xifexpression_1 = null;
        boolean _exists = f.exists();
        if (_exists) {
          _xifexpression_1 = null;
        }
        _xblockexpression = _xifexpression_1;
      }
      _xifexpression = _xblockexpression;
    }
    return _xifexpression;
  }
}
